{"version":3,"sources":["components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","name","number","Persons","persons","removePerson","map","key","Math","random","onClick","id","Filter","value","onChange","PersonFrom","onSubmit","onNameChange","onNumberChange","type","Notification","message","isErrorMessage","notification","className","baseUrl","axios","get","newPerson","post","then","response","data","put","delete","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","errorMessage","setErrorMessage","setNotification","useEffect","personsService","nameFilter","toLowerCase","search","event","target","PersonForm","preventDefault","length","includes","createdPerson","catch","err","error","setTimeout","window","confirm","currentPerson","erorr","p","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad7d34cf.chunk.js","sourcesContent":["import React from 'react';\n\n\nconst Person = ({ person}) => {\n  return (\n    <ul>\n      {person.name} {person.number}\n     </ul>\n\n  )\n};\n\nexport default Person;","import React from 'react';\nimport Person from './Person';\n\nconst Persons = ({persons, removePerson}) => {\n  const rows = () => {\n    return  persons.map(person => \n        <li key={Math.random()}>\n         <Person key={Person.name} person={person} />\n          <button onClick={() => removePerson(person.id, person.name)}>\n          delete\n          </button>\n      </li>  \n    ) } \n  return (\n  <ul>\n    {rows()}\n  </ul>\n)\n}\n\nexport default Persons;","import React from 'react';\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <>\n      <i>filter shown with: </i>\n      <input value={value} onChange={onChange} />\n    </>\n  );\n};\n\n\nexport default Filter;","import React from 'react'; \n\nconst PersonFrom = ({ onSubmit,name,number,onNameChange,onNumberChange}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <>\n        name: <input value={name} onChange={onNameChange} />\n      </>\n      <>\n        number: <input value={number} onChange={onNumberChange} />\n      </>\n      <>\n        <button type=\"submit\">add</button>\n      </>\n    </form>\n  );\n};\n\n\n\nexport default PersonFrom;","import React from \"react\";\n\nconst Notification = ({ message, isErrorMessage = false }) => {\n  const notification = isErrorMessage ? \"error\" : \"notification\";\n  return <p className={notification}>{message}</p>;\n};\n\nexport default Notification;","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newPerson => {\n  const request =  axios.post(baseUrl, newPerson)\n  return request.then(response => response.data)\n}\n\nconst update = (newPerson) => {\n  const request = axios.put(`${baseUrl}/${newPerson.id}`, newPerson);\n  return request.then(response => response.data);\n//   return axios.put(`${baseUrl}/${id}`, newPerson)\n}\n\nconst remove = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n  }\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Notification from './components/Notification';\nimport personsService from './services/persons';\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [filter, setFilter] = useState('');\n  const [errorMessage, setErrorMessage] = useState()\n  const [notification, setNotification] = useState()\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n  \n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    const sameName =  persons.filter(\n      person => person.name === newName\n    );\n  \n    if (sameName.length > 0) {\n      if (!window.confirm(`${newPerson.name} is already added to the phonebook. Would you like to change its number?`)) return\n      \n\n      const sameName = persons.filter(\n        person => person.name === newName\n      );\n\n      const currentPerson = sameName[0];\n\n      currentPerson.number = newNumber;\n\n      personsService\n          .update(currentPerson)\n          .then(data => {\n            setPersons(\n              persons.map(person => {\n                return person.id === data.id ? data : person;\n              })\n            );\n            setNotification(`Updated ${currentPerson.name}'s number`);\n          })\n          .catch(erorr => {\n            setErrorMessage(`Information of ${currentPerson.name}  has already been removed from the server`\n            );\n            setTimeout(() => {\n              setErrorMessage(\"\")\n            }, 3000)\n            setPersons(persons.filter(p => p.id !== currentPerson.id))\n          })\n        } else {\n          if (!persons.includes(newPerson)) {\n          personsService\n        .create(newPerson)\n          .then(createdPerson => {\n          setPersons([...persons, createdPerson]);\n          setNotification(`${newName} was added`);\n        })\n        .catch(err => {\n          setErrorMessage(err.response.data.error);\n        });\n    }\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setTimeout(() => {\n          setNotification(\"\");\n          setErrorMessage(\"\");\n          }, 3000);\n\n      return;\n    };\n  }\n    const removePerson = (id, name) => {\n      if (!window.confirm(`Delete ${name}?`)) return\n  \n      personsService\n        .remove(id)\n        .then(()=> {\n          setPersons(persons.filter(p => p.id !== id))\n          setErrorMessage(`${name} was deleted`);\n        })\n        .catch(error => {\n          setErrorMessage(`Information of ${name} has already been removed from server`);\n          setPersons(persons.filter(p => p.id !== id))\n        })\n    }\n  const handleNameChange =  event => setNewName(event.target.value);\n  const handleNumberChange =  event => setNewNumber(event.target.value);\n  const handleFilterChange =  event => setFilter(event.target.value);\n  \n\n  const nameFilter = filter\n    ? persons.filter(person => person.name.toLowerCase().search(filter.toLowerCase()) !== -1)\n    : persons;  \n\n    \n  return (\n    <>\n      <h2> Phonebook</h2>\n      {errorMessage ? (\n        <Notification message={errorMessage} isErrorMessage={true} />\n      ) : null}\n      {notification ? <Notification message={notification} /> : null}\n      <>\n      <Filter value={filter} onChange={handleFilterChange} />\n      </>\n      <h2>Add New</h2>\n      <PersonForm\n        onSubmit={handleSubmit}\n        name={newName}\n        number={newNumber}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons \n      persons={nameFilter} \n      setPersons={setPersons}\n      removePerson={removePerson}\n      />\n      \n    </>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}