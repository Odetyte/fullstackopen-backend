(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},22:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(15),u=t.n(o),c=(t(22),t(16)),l=t(2),i=function(e){var n=e.person;return r.a.createElement("ul",null,n.name," ",n.number)},m=function(e){var n=e.persons,t=e.removePerson;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:Math.random()},r.a.createElement(i,{key:i.name,person:e}),r.a.createElement("button",{onClick:function(){return t(e.id,e.name)}},"delete"))})))},s=function(e){var n=e.value,t=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",null,"filter shown with: "),r.a.createElement("input",{value:n,onChange:t}))},f=function(e){var n=e.onSubmit,t=e.name,a=e.number,o=e.onNameChange,u=e.onNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement(r.a.Fragment,null,"name: ",r.a.createElement("input",{value:t,onChange:o})),r.a.createElement(r.a.Fragment,null,"number: ",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.message,t=e.isErrorMessage,a=void 0!==t&&t?"error":"notification";return r.a.createElement("p",{className:a},n)},b=t(4),h=t.n(b),E="/api/persons",g=function(){return h.a.get(E)},p=function(e){return h.a.post(E,e).then((function(e){return e.data}))},v=function(e){return h.a.put("".concat(E,"/").concat(e.id),e).then((function(e){return e.data}))},j=function(e){return h.a.delete("".concat(E,"/").concat(e)).then((function(e){return e.data}))},O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),b=i[0],h=i[1],E=Object(a.useState)(""),O=Object(l.a)(E,2),w=O[0],C=O[1],k=Object(a.useState)(""),S=Object(l.a)(k,2),y=S[0],N=S[1],F=Object(a.useState)(),M=Object(l.a)(F,2),P=M[0],I=M[1],D=Object(a.useState)(),J=Object(l.a)(D,2),L=J[0],T=J[1];Object(a.useEffect)((function(){g().then((function(e){o(e.data)}))}),[]);var x=y?t.filter((function(e){return-1!==e.name.toLowerCase().search(y.toLowerCase())})):t;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," Phonebook"),P?r.a.createElement(d,{message:P,isErrorMessage:!0}):null,L?r.a.createElement(d,{message:L}):null,r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{value:y,onChange:function(e){return N(e.target.value)}})),r.a.createElement("h2",null,"Add New"),r.a.createElement(f,{onSubmit:function(e){e.preventDefault();var n={name:b,number:w};if(!(t.filter((function(e){return e.name===b})).length>0))return t.includes(n)||p(n).then((function(e){o([].concat(Object(c.a)(t),[e])),T("".concat(b," was added"))})).catch((function(e){I(e.response.data.error)})),h(""),C(""),void setTimeout((function(){T(""),I("")}),3e3);if(window.confirm("".concat(n.name," is already added to the phonebook. Would you like to change its number?"))){var a=t.filter((function(e){return e.name===b}))[0];a.number=w,v(a).then((function(e){o(t.map((function(n){return n.id===e.id?e:n}))),T("Updated ".concat(a.name,"'s number"))})).catch((function(e){I("Information of ".concat(a.name,"  has already been removed from the server")),setTimeout((function(){I("")}),3e3),o(t.filter((function(e){return e.id!==a.id})))}))}},name:b,number:w,onNameChange:function(e){return h(e.target.value)},onNumberChange:function(e){return C(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{persons:x,setPersons:o,removePerson:function(e,n){window.confirm("Delete ".concat(n,"?"))&&j(e).then((function(){o(t.filter((function(n){return n.id!==e}))),I("".concat(n," was deleted"))})).catch((function(a){I("Information of ".concat(n," has already been removed from server")),o(t.filter((function(n){return n.id!==e})))}))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ad7d34cf.chunk.js.map